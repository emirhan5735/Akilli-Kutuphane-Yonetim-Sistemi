<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LibraryApp Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
</head>
<body class="sb-sidenav-toggled">

<div class="d-flex" id="wrapper">

    <div class="bg-navy border-end d-flex flex-column" id="sidebar-wrapper">
    <div class="sidebar-heading d-flex align-items-center">
            <i class="fas fa-book-reader me-2"></i><span>LibraryApp</span>
        </div>

        <div class="list-group list-group-flush my-3 flex-grow-1">
            <a href="#" data-section="homeSection"
               onclick="showSection('homeSection', this)"
               class="list-group-item list-group-item-action bg-transparent second-text active">
                <i class="fas fa-home me-2"></i> Ana Sayfa
            </a>
            <a href="#" data-section="booksSection"
               onclick="showSection('booksSection', this)"
               class="list-group-item list-group-item-action bg-transparent second-text">
                <i class="fas fa-book me-2"></i> Kitaplar
            </a>
            <a href="#" data-section="authorsSection"
               onclick="showSection('authorsSection', this)"
               class="list-group-item list-group-item-action bg-transparent second-text">
                <i class="fas fa-user-pen me-2"></i> Yazarlar
            </a>
            <a href="#" data-section="categoriesSection"
               onclick="showSection('categoriesSection', this)"
               class="list-group-item list-group-item-action bg-transparent second-text">
                <i class="fas fa-layer-group me-2"></i> Kategoriler
            </a>
            <a href="#" data-section="rentedSection"
               onclick="showSection('rentedSection', this)"
               class="list-group-item list-group-item-action bg-transparent second-text">
                <i class="fas fa-hand-holding me-2"></i> Kiralanan Kitaplar
            </a>
            <a href="#" data-section="penaltySection"
               onclick="showSection('penaltySection', this)"
               class="list-group-item list-group-item-action bg-transparent second-text">
                <i class="fas fa-money-bill-wave me-2"></i> Cezalarım
            </a>
        </div>

        <div class="list-group list-group-flush mt-auto mb-4">
            <a href="#" onclick="logout()" class="list-group-item list-group-item-action bg-transparent text-danger fw-bold">
                <i class="fas fa-power-off me-2"></i> Çıkış Yap
            </a>
        </div>
    </div>

    <div id="page-content-wrapper">
        <nav class="navbar navbar-expand-lg navbar-light bg-white py-3 px-4 shadow-sm">
            <div class="d-flex align-items-center">
                <i class="fas fa-align-left primary-text fs-4 me-3" id="menu-toggle" style="cursor: pointer;"></i>
                <h2 class="fs-4 m-0">Hoş geldin, <span id="headerUsername">Kullanıcı</span></h2>
            </div>
        </nav>

        <div id="homeSection" class="content-section active">
            <div class="home-hero">
                <div class="hero-overlay"></div>
                <div class="hero-content text-center text-white">
                    <h1 class="display-5 fw-bold mb-3">Kütüphane Arşivinde Ara</h1>
                    <p class="lead mb-4">Kitap adını yazarak hızlıca bul ve detaylarına ulaş.</p>
                    <form class="hero-search-form" onsubmit="globalSearch(event)">
                        <div class="input-group input-group-lg hero-search-group">
                            <span class="input-group-text bg-white border-end-0">
                                <i class="fas fa-search text-muted"></i>
                            </span>
                            <input type="text"
                                   class="form-control border-start-0"
                                   id="globalSearchInput"
                                   placeholder="Kitap adı yazın..."
                                   required>
                            <button class="btn btn-navy btn-lg" type="submit">
                                Ara
                            </button>
                        </div>
                        <small class="d-block mt-2 text-light-50">
                            Örnek: “Suç ve Ceza”, “Yüzüklerin Efendisi” vb.
                        </small>
                    </form>
                </div>
            </div>
        </div>

        <div id="booksSection" class="content-section">
            <div class="container-fluid px-4 py-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="fs-4 fw-bold text-navy mb-0">Kitaplar</h3>

                    <div id="adminBooksActions" style="display:none;">
                        <button class="btn btn-navy" data-bs-toggle="modal" data-bs-target="#kitapModal" onclick="prepareBookModal()">
                            <i class="fas fa-plus me-2"></i> Kitap Ekle
                        </button>
                    </div>
                </div>

                <div class="card shadow-sm border-0 mb-3">
                    <div class="card-body p-3">
                        <div class="input-group input-group-lg">
                            <span class="input-group-text bg-white border-end-0">
                                <i class="fas fa-search text-muted"></i>
                            </span>
                            <input type="text"
                                   class="form-control border-start-0"
                                   id="bookSearchInput"
                                   placeholder="Kitap adı, yazar veya kategori ara..."
                                   onkeyup="filterBooks(this.value)">
                        </div>
                    </div>
                </div>

                <div class="bg-white p-4 rounded shadow-sm">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle">
                            <thead class="bg-light">
                            <tr>
                                <th class="text-navy">#</th>
                                <th class="text-navy">Kitap Adı</th>
                                <th class="text-navy">Yazar</th>
                                <th class="text-navy">Kategori</th>
                                <th class="text-navy">Yıl</th>
                                <th class="text-navy">Stok</th>
                                <th class="text-navy">İşlem</th>
                            </tr>
                            </thead>
                            <tbody id="bookList"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="authorsSection" class="content-section">
            <div class="container-fluid px-4 py-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="fs-4 fw-bold text-navy mb-0">Yazarlar</h3>

                    <div id="adminAuthorsActions" style="display:none;">
                        <button class="btn btn-navy" data-bs-toggle="modal" data-bs-target="#yazarModal">
                            <i class="fas fa-plus me-2"></i> Yazar Ekle
                        </button>
                    </div>
                </div>

                <div class="card shadow-sm border-0 mb-3">
                    <div class="card-body p-3">
                        <div class="input-group input-group-lg">
                            <span class="input-group-text bg-white border-end-0">
                                <i class="fas fa-search text-muted"></i>
                            </span>
                            <input type="text"
                                   class="form-control border-start-0"
                                   id="authorSearchInput"
                                   placeholder="Yazar adı veya soyadı ara..."
                                   onkeyup="filterAuthors(this.value)">
                        </div>
                    </div>
                </div>

                <div class="bg-white p-4 rounded shadow-sm">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle">
                            <thead class="bg-light">
                            <tr>
                                <th class="text-navy">#</th>
                                <th class="text-navy">Ad Soyad</th>
                                <th class="text-navy">Biyografi</th>
                            </tr>
                            </thead>
                            <tbody id="authorList"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="categoriesSection" class="content-section">
            <div class="container-fluid px-4 py-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="fs-4 fw-bold text-navy mb-0">Kategoriler</h3>

                    <div id="adminCategoriesActions" style="display:none;">
                        <button class="btn btn-navy" data-bs-toggle="modal" data-bs-target="#kategoriModal">
                            <i class="fas fa-plus me-2"></i> Kategori Ekle
                        </button>
                    </div>
                </div>

                <div class="card shadow-sm border-0 mb-3">
                    <div class="card-body p-3">
                        <div class="input-group input-group-lg">
                            <span class="input-group-text bg-white border-end-0">
                                <i class="fas fa-search text-muted"></i>
                            </span>
                            <input type="text"
                                   class="form-control border-start-0"
                                   id="categorySearchInput"
                                   placeholder="Kategori adı ara..."
                                   onkeyup="filterCategories(this.value)">
                        </div>
                    </div>
                </div>

                <div class="bg-white p-4 rounded shadow-sm">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle">
                            <thead class="bg-light">
                            <tr>
                                <th class="text-navy">#</th>
                                <th class="text-navy">Kategori Adı</th>
                            </tr>
                            </thead>
                            <tbody id="categoryList"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="rentedSection" class="content-section">
            <div class="container-fluid px-4 py-4">
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="card shadow-sm border-0">
                            <div class="card-body p-4">
                                <h4 class="mb-3 text-navy">Kiralanan Kitaplarda Ara</h4>
                                <div class="input-group input-group-lg">
                                    <span class="input-group-text bg-white border-end-0">
                                        <i class="fas fa-search text-muted"></i>
                                    </span>
                                    <input type="text" class="form-control border-start-0"
                                           id="rentedSearchInput"
                                           placeholder="Kitap adı veya yazar ara..."
                                           onkeyup="filterRentedBooks(this.value)">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="fs-4 fw-bold text-navy mb-3">Kiraladığım Kitaplar</h3>

                <div class="bg-white p-4 rounded shadow-sm">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle">
                            <thead class="bg-light">
                            <tr>
                                <th class="text-navy">#</th>
                                <th class="text-navy">Kitap Adı</th>
                                <th class="text-navy">Alış Tarihi</th>
                                <th class="text-navy">İade Tarihi</th>
                                <th class="text-navy">Kalan Süre</th>
                                <th class="text-navy text-end">İşlemler</th>
                            </tr>
                            </thead>
                            <tbody id="rentedBookList"></tbody>
                        </table>
                    </div>
                    <div id="noRentedData" class="text-center py-3 text-muted" style="display:none;">
                        Henüz kiraladığınız bir kitap bulunmuyor.
                    </div>
                </div>
            </div>
        </div>

        <div id="penaltySection" class="content-section">
            <div class="container-fluid px-4 py-4">
                <h3 class="fs-4 fw-bold text-navy mb-3">Ceza ve Borç Durumu</h3>

                <div class="bg-white p-4 rounded shadow-sm">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle">
                            <thead class="bg-light">
                            <tr>
                                <th class="text-navy">#</th>
                                <th class="text-navy">Kitap Adı</th>
                                <th class="text-navy">Ceza Tarihi</th>
                                <th class="text-navy">Tutar</th>
                                <th class="text-navy">Durum</th>
                                <th class="text-navy text-end">İşlem</th>
                            </tr>
                            </thead>
                            <tbody id="penaltyList"></tbody>
                        </table>
                    </div>
                    <div id="noPenaltyData" class="text-center py-3 text-muted" style="display:none;">
                        Herhangi bir ceza kaydınız bulunmamaktadır.
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="modal fade" id="kitapModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Kitap Ekle</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="text" id="kitapAd" class="form-control mb-2" placeholder="Kitap Adı">
                <input type="number" id="kitapYil" class="form-control mb-2" placeholder="Yıl">
                <input type="number" id="kitapStok" class="form-control mb-2" placeholder="Stok">
                <label>Yazar</label>
                <select id="kitapYazarSelect" class="form-select mb-2"></select>
                <label>Kategori</label>
                <select id="kitapKategoriSelect" class="form-select"></select>
            </div>
            <div class="modal-footer">
                <button onclick="addKitap()" class="btn btn-navy">Kaydet</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="yazarModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Yazar Ekle</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="text" id="yazarAd" class="form-control mb-2" placeholder="Ad">
                <input type="text" id="yazarSoyad" class="form-control mb-2" placeholder="Soyad">
                <textarea id="yazarBio" class="form-control" placeholder="Biyografi"></textarea>
            </div>
            <div class="modal-footer">
                <button onclick="addYazar()" class="btn btn-navy">Kaydet</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="kategoriModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Kategori Ekle</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="text" id="kategoriAd" class="form-control mb-2" placeholder="Kategori Adı">
                <textarea id="kategoriAciklama" class="form-control" placeholder="Açıklama"></textarea>
            </div>
            <div class="modal-footer">
                <button onclick="addKategori()" class="btn btn-navy">Kaydet</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="dateModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">İade Tarihi Seçin</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Lütfen kitabı iade edeceğiniz tarihi seçiniz:</p>
                <input type="date" id="selectedDate" class="form-control">

                <input type="hidden" id="modalKitapId">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                <button onclick="submitOduncAl()" class="btn btn-navy">Onayla ve Kirala</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/panel.js"></script>
</body>
</html>